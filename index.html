<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>POP 'N CRUNCH</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4f46e5',
            accent: '#f59e0b',
            background: '#fdf9f3',
            surface: '#fefefe',
            text: '#374151'
          }
        }
      }
    }
  </script>
  <script type="module">
    import React, { useState } from 'https://esm.sh/react@18.2.0';
    import ReactDOM from 'https://esm.sh/react-dom@18.2.0';

    const menu = [
      { id: 1, name: 'Regular Fries', price: 35, img: 'regular.jpeg', category: 'fries' },
      { id: 2, name: 'Large Fries', price: 45, img: 'large.jpeg', category: 'fries' },
      { id: 3, name: 'Fruit Soda - Strawberry', price: 25, img: 'strawberry.jpeg', category: 'soda' },
      { id: 4, name: 'Fruit Soda - Blueberry', price: 25, img: 'blueberry.jpeg', category: 'soda' },
      { id: 5, name: 'Fruit Soda - Green Apple', price: 25, img: 'greenapple.jpeg', category: 'soda' },
      { id: 6, name: 'Add-on: Nata de Coco', price: 10, img: 'natadecoco.jpeg', category: 'addon' },
    ];

    function App() {
      const [cart, setCart] = useState([]);
      const [showCart, setShowCart] = useState(false);
      const [showForm, setShowForm] = useState(false);
      const [name, setName] = useState('');
      const [address, setAddress] = useState('');

      const addToCart = (item) => {
        setCart(prev => {
          const existing = prev.find(i => i.id === item.id);
          return existing
            ? prev.map(i => i.id === item.id ? { ...i, quantity: i.quantity + 1 } : i)
            : [...prev, { ...item, quantity: 1 }];
        });
      };

      const updateQuantity = (id, delta) => {
        setCart(prev =>
          prev
            .map(item => item.id === id ? { ...item, quantity: item.quantity + delta } : item)
            .filter(item => item.quantity > 0)
        );
      };

      const subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
      const total = subtotal + 15;
      const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);

      // Step 1: After payment, show form
      const handlePaymentConfirmed = () => {
        if (cart.length === 0) {
          alert("Your cart is empty!");
          return;
        }
        setShowForm(true);
        setShowCart(false);
      };

      // Step 2: Submit form ‚Üí open FB chat + copy message
      const submitOrderForm = (e) => {
        e.preventDefault();
        if (!name.trim() || !address.trim()) {
          alert("Please enter your name and address.");
          return;
        }

        const itemsText = cart.map(item => `${item.name} x${item.quantity}`).join(', ');
        const message = `Hi! I'd like to place an order:\n\nName: ${name}\nAddress: ${address}\n\nItems: ${itemsText}\nTotal: ‚Ç±${total} (incl. delivery)\n\nI've paid via GCash. Please confirm!`;

        // Open direct Facebook Messages chat
        const fbChatUrl = "https://www.facebook.com/messages/t/61586479456909";
        const chatWindow = window.open(fbChatUrl, '_blank');

        // Copy message to clipboard
        navigator.clipboard.writeText(message).then(() => {
          // Focus chat window if possible
          if (chatWindow) setTimeout(() => chatWindow.focus(), 500);
          
          alert(
            '‚úÖ Order copied!\n\n' +
            '1. The Facebook chat has opened.\n' +
            '2. Paste this message (Ctrl+V or long-press ‚Üí Paste).\n' +
            '3. Send it to complete your order!'
          );
        }).catch(() => {
          alert('Failed to copy. Please select and copy the message manually.');
        });

        // Optional: Clear cart after sending
        setCart([]);
        setName('');
        setAddress('');
        setShowForm(false);
      };

      // Copy template (without name/address)
      const copyOrderTemplate = () => {
        if (cart.length === 0) {
          alert("Your cart is empty!");
          return;
        }
        const template = `Hi! I'd like to place an order:

Name: [Your Full Name]
Address: [Your Complete Address or Landmark]

Items: ${cart.map(item => `${item.name} x${item.quantity}`).join(', ')}
Total: ‚Ç±${total} (incl. delivery)

I've paid via GCash. Please confirm!

Message me here: https://www.facebook.com/profile.php?id=61586479456909`;
        
        navigator.clipboard.writeText(template).then(() => {
          alert('üìã Template copied! Fill in your details and send it to our Facebook page.');
        });
      };

      return React.createElement(
        'div',
        { className: 'min-h-screen bg-background text-text font-sans' },

        // Header
        React.createElement(
          'header',
          { className: 'bg-white shadow-sm border-b border-gray-100' },
          React.createElement(
            'div',
            { className: 'max-w-4xl mx-auto px-4 py-4 flex justify-between items-center' },
            React.createElement('h1', { className: 'text-xl font-semibold text-gray-800' }, 'pop ‚Äôn crunch'),
            React.createElement(
              'button',
              {
                onClick: () => setShowCart(true),
                className: 'relative p-2 text-lg text-gray-700 hover:text-primary transition'
              },
              'üõí',
              itemCount > 0 &&
                React.createElement(
                  'span',
                  {
                    className: 'absolute -top-1 -right-1 bg-accent text-white text-xs rounded-full h-5 w-5 flex items-center justify-center'
                  },
                  itemCount
                )
            )
          )
        ),

        // Main Menu
        React.createElement(
          'main',
          { className: 'max-w-4xl mx-auto px-4 py-8' },
          // Fries
          React.createElement(
            'section',
            { className: 'mb-8' },
            React.createElement('h2', { className: 'text-lg font-medium mb-4 text-gray-700 pb-2 border-b border-gray-200' }, 'FRIES'),
            React.createElement(
              'div',
              { className: 'grid grid-cols-1 md:grid-cols-2 gap-4' },
              menu.filter(item => item.category === 'fries').map(item =>
                React.createElement(
                  'div',
                  { key: item.id, className: 'flex items-center justify-between bg-surface p-4 rounded-xl shadow-sm border border-gray-100' },
                  React.createElement(
                    'div',
                    { className: 'flex items-center space-x-3' },
                    React.createElement('img', { src: item.img, alt: item.name, className: 'w-12 h-12 object-contain rounded' }),
                    React.createElement('span', { className: 'font-medium text-gray-800' }, item.name)
                  ),
                  React.createElement(
                    'div',
                    { className: 'flex items-center space-x-2' },
                    React.createElement('span', { className: 'font-bold text-primary' }, `‚Ç±${item.price}`),
                    React.createElement(
                      'button',
                      {
                        onClick: () => addToCart(item),
                        className: 'ml-2 py-1 px-3 bg-primary text-white rounded text-sm hover:bg-indigo-700 transition'
                      },
                      '+'
                    )
                  )
                )
              )
            )
          ),

          // Sodas
          React.createElement(
            'section',
            { className: 'mb-8' },
            React.createElement('h2', { className: 'text-lg font-medium mb-4 text-gray-700 pb-2 border-b border-gray-200' }, 'FRUIT SODA'),
            React.createElement(
              'div',
              { className: 'grid grid-cols-1 sm:grid-cols-3 gap-4' },
              menu.filter(item => item.category === 'soda').map(item =>
                React.createElement(
                  'div',
                  { key: item.id, className: 'flex flex-col items-center bg-surface p-4 rounded-xl shadow-sm border border-gray-100' },
                  React.createElement('img', { src: item.img, alt: item.name, className: 'w-16 h-16 object-contain mb-2' }),
                  React.createElement('span', { className: 'font-medium text-sm text-gray-800' }, item.name.split(' - ')[1]),
                  React.createElement('span', { className: 'font-bold text-primary mt-1' }, `‚Ç±${item.price}`),
                  React.createElement(
                    'button',
                    {
                      onClick: () => addToCart(item),
                      className: 'mt-2 py-1 px-3 bg-primary text-white rounded text-sm hover:bg-indigo-700 transition'
                    },
                    '+'
                  )
                )
              )
            )
          ),

          // Add-ons
          React.createElement(
            'section',
            { className: 'mb-8' },
            React.createElement('h2', { className: 'text-lg font-medium mb-4 text-gray-700 pb-2 border-b border-gray-200' }, 'ADD-ONS'),
            React.createElement(
              'div',
              { className: 'flex items-center justify-between bg-surface p-4 rounded-xl shadow-sm border border-gray-100' },
              React.createElement(
                'div',
                { className: 'flex items-center space-x-3' },
                React.createElement('img', { src: 'natadecoco.jpeg', alt: 'Nata de Coco', className: 'w-12 h-12 object-contain rounded' }),
                React.createElement('span', { className: 'font-medium text-gray-800' }, 'Nata de Coco')
              ),
              React.createElement(
                'div',
                { className: 'flex items-center space-x-2' },
                React.createElement('span', { className: 'font-bold text-primary' }, '‚Ç±10'),
                React.createElement(
                  'button',
                  {
                    onClick: () => addToCart(menu.find(m => m.id === 6)),
                    className: 'ml-2 py-1 px-3 bg-primary text-white rounded text-sm hover:bg-indigo-700 transition'
                  },
                  '+'
                )
              )
            )
          ),

          React.createElement('p', { className: 'text-gray-500 text-center text-sm mt-6' }, 'Delivery fee: ‚Ç±10‚Äì15 (based on location)')
        ),

        // Cart Modal
        showCart &&
          React.createElement(
            React.Fragment,
            null,
            React.createElement('div', {
              className: 'fixed inset-0 bg-black bg-opacity-30 z-40',
              onClick: () => setShowCart(false)
            }),
            React.createElement(
              'div',
              {
                className: 'fixed bottom-0 left-0 right-0 bg-white p-6 rounded-t-2xl max-h-[80vh] overflow-y-auto z-50 shadow-lg'
              },
              React.createElement(
                'div',
                { className: 'flex justify-between items-center mb-4' },
                React.createElement('h2', { className: 'text-lg font-semibold text-gray-800' }, 'Your Order'),
                React.createElement('button', { onClick: () => setShowCart(false), className: 'text-xl text-gray-500' }, '√ó')
              ),
              cart.length === 0
                ? React.createElement('p', { className: 'text-gray-500' }, 'Your cart is empty.')
                : React.createElement(
                    'div',
                    null,
                    cart.map(item =>
                      React.createElement(
                        'div',
                        { key: item.id, className: 'flex justify-between py-3 border-b border-gray-100' },
                        React.createElement(
                          'div',
                          null,
                          React.createElement('h4', { className: 'font-medium text-gray-800' }, item.name),
                          React.createElement('p', { className: 'text-xs text-gray-500 mt-1' }, `‚Ç±${item.price} √ó ${item.quantity}`)
                        ),
                        React.createElement(
                          'div',
                          { className: 'flex items-center space-x-2' },
                          React.createElement(
                            'button',
                            { onClick: () => updateQuantity(item.id, -1), className: 'w-7 h-7 rounded-full bg-gray-100 flex items-center justify-center text-gray-600' },
                            '‚àí'
                          ),
                          React.createElement('span', { className: 'w-8 text-center font-medium' }, item.quantity),
                          React.createElement(
                            'button',
                            { onClick: () => updateQuantity(item.id, 1), className: 'w-7 h-7 rounded-full bg-gray-100 flex items-center justify-center text-gray-600' },
                            '+'
                          )
                        )
                      )
                    ),
                    React.createElement(
                      'div',
                      { className: 'mt-5 space-y-1 text-sm' },
                      React.createElement('div', { className: 'flex justify-between text-gray-600' },
                        React.createElement('span', null, 'Subtotal:'),
                        React.createElement('span', null, `‚Ç±${subtotal}`)
                      ),
                      React.createElement('div', { className: 'flex justify-between text-gray-600' },
                        React.createElement('span', null, 'Delivery:'),
                        React.createElement('span', null, '‚Ç±10‚Äì15')
                      ),
                      React.createElement('div', { className: 'flex justify-between font-bold text-gray-800 pt-2 border-t border-gray-200' },
                        React.createElement('span', null, 'Total (est.):'),
                        React.createElement('span', null, `‚Ç±${total}`)
                      )
                    ),
                    React.createElement(
                      'div',
                      { className: 'mt-6 text-center' },
                      React.createElement('h3', { className: 'font-medium text-gray-700 mb-2' }, 'Pay via GCash'),
                      React.createElement('img', {
                        src: 'gcash-qr1012.png',
                        alt: 'GCash QR Code',
                        className: 'w-32 h-32 mx-auto border rounded-lg bg-white p-1'
                      }),
                      React.createElement('p', { className: 'text-xs text-gray-500 mt-2' }, 'Scan to pay. Include your order in the reference.'),
                      React.createElement(
                        'button',
                        {
                          onClick: handlePaymentConfirmed,
                          className: 'w-full mt-4 py-2.5 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition'
                        },
                        '‚úÖ I‚Äôve Paid ‚Äì Send My Order'
                      ),
                      React.createElement(
                        'button',
                        {
                          onClick: copyOrderTemplate,
                          className: 'w-full mt-2 py-2 text-gray-600 border border-gray-300 rounded text-sm hover:bg-gray-50 transition'
                        },
                        'üìã Copy Order Template'
                      )
                    )
                  )
            )
          ),

        // Delivery Form Modal
        showForm &&
          React.createElement(
            React.Fragment,
            null,
            React.createElement('div', {
              className: 'fixed inset-0 bg-black bg-opacity-40 z-50 flex items-end justify-center'
            }),
            React.createElement(
              'div',
              {
                className: 'bg-white w-full max-w-md rounded-t-2xl p-6 z-50'
              },
              React.createElement('h2', { className: 'text-lg font-semibold text-gray-800 mb-4' }, 'Delivery Details'),
              React.createElement(
                'form',
                {
                  onSubmit: submitOrderForm,
                  className: 'space-y-4'
                },
                React.createElement(
                  'div',
                  null,
                  React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'Full Name'),
                  React.createElement('input', {
                    type: 'text',
                    value: name,
                    onChange: (e) => setName(e.target.value),
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-primary focus:outline-none',
                    placeholder: 'Juan Dela Cruz',
                    required: true
                  })
                ),
                React.createElement(
                  'div',
                  null,
                  React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-1' }, 'Delivery Address or Landmark'),
                  React.createElement('textarea', {
                    value: address,
                    onChange: (e) => setAddress(e.target.value),
                    rows: 3,
                    className: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-primary focus:outline-none',
                    placeholder: 'e.g., Brgy. San Isidro, near Jollibee...',
                    required: true
                  })
                ),
                React.createElement(
                  'button',
                  {
                    type: 'submit',
                    className: 'w-full py-2.5 bg-primary text-white rounded-lg font-medium hover:bg-indigo-700 transition'
                  },
                  'üì§ Send Order via Facebook'
                ),
                React.createElement(
                  'button',
                  {
                    type: 'button',
                    onClick: () => setShowForm(false),
                    className: 'w-full mt-2 py-2 text-gray-600 rounded text-sm'
                  },
                  '‚Üê Back to Cart'
                )
              )
            )
          ),

        // Footer
        React.createElement(
          'footer',
          { className: 'text-center py-6 text-gray-500 text-xs' },
          `¬© ${new Date().getFullYear()} pop ‚Äôn crunch ‚Äî fresh snacks, fast delivery. `,
          React.createElement(
            'a',
            {
              href: 'https://www.facebook.com/profile.php?id=61586479456909',
              target: '_blank',
              rel: 'noopener noreferrer',
              className: 'text-primary hover:underline ml-1'
            },
            'Message us on Facebook'
          )
        )
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
  </script>
</head>
<body class="min-h-screen bg-background">
  <div id="root"></div>
</body>
</html>